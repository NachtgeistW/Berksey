---
title: 盐酸的C++基础知识小讲堂——lambda表达式
category: 
- C++
tag: 
- C++
---
真实基础知识，真实讲堂

以下笔记摘自 D.N.Code 群聊天记录
<!-- more -->
首先来看维基百科的 Perm 算法的实现。

```C++
explicit perm(const int l = 0, function<void(vector<int>&)> fun = [](vector<int>&) {}) : len(l), used(l, -1), position(l), action(std::move(fun)) {}

...

perm p(len, [&](vector<int>& vec)
  {
   for (int i = 0; i < len; i++)
    cout << vec[i] << " ";
   cout << endl;
  });
```

这一堆东西是什么？？？

> 类模板 std::function 是通用多态函数封装器。  
std::function 的实例能存储、复制及调用任何可调用 (Callable) 目标——函数、 lambda 表达式、 bind 表达式或其他函数对象，还有指向成员函数指针和指向数据成员指针。  
—— cppreference

> 就是一个构造函数两个参数，一个 int 一个回调函数。  
`function<void(vector<int>&)> a = [](vector<int>&) {})`是回调函数。  
fun 的默认值是一个符合这个 signature 的空函数。  
`std::function<Res(Arg...)>` 就是一个可以保存任何“参数类型是 Arg... 返回类型是 Res 的可以调用的东西的类”。  
`[](vector<int>&){}` 是一个参数为 `vector<int>&` 的空函数。`len(l), used(l, -1), position(l), action(std::move(fun))` 就是构造函数初始值列表。  
这里先值传递 function 再 move 进去是构造函数常用的一种方法。  
——盐酸

> 建议去看一下lambda表达式（  
——盐酸

之后 jy 提问“`[&](vector<int>& vec)`是什么，要怎么用”。

